
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../project-wordsight/">
      
      
        <link rel="next" href="../project-tsp/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>What Makes You Happy? - Diamond, Dahye</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="pink">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#what-makes-you-happy" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Diamond, Dahye" class="md-header__button md-logo" aria-label="Diamond, Dahye" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="m168.5 72 87.5 93 87.5-93h-175zm215.4 27.1L311.5 176h129l-56.6-76.9zm50 124.9H78.1L256 420.3 433.9 224zM71.5 176h129l-72.4-76.9L71.5 176zm434.3 40.1-232 256c-4.5 5-11 7.9-17.8 7.9s-13.2-2.9-17.8-7.9l-232-256c-7.7-8.5-8.3-21.2-1.5-30.4l112-152c4.5-6.1 11.7-9.8 19.3-9.8h240c7.6 0 14.8 3.6 19.3 9.8l112 152c6.8 9.2 6.1 21.9-1.5 30.4z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Diamond, Dahye
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              What Makes You Happy?
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/kangdaia/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    kangdaia/profile
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../project-animal/" class="md-tabs__link md-tabs__link--active">
        Projects
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Diamond, Dahye" class="md-nav__button md-logo" aria-label="Diamond, Dahye" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="m168.5 72 87.5 93 87.5-93h-175zm215.4 27.1L311.5 176h129l-56.6-76.9zm50 124.9H78.1L256 420.3 433.9 224zM71.5 176h129l-72.4-76.9L71.5 176zm434.3 40.1-232 256c-4.5 5-11 7.9-17.8 7.9s-13.2-2.9-17.8-7.9l-232-256c-7.7-8.5-8.3-21.2-1.5-30.4l112-152c4.5-6.1 11.7-9.8 19.3-9.8h240c7.6 0 14.8 3.6 19.3 9.8l112 152c6.8 9.2 6.1 21.9-1.5 30.4z"/></svg>

    </a>
    Diamond, Dahye
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kangdaia/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    kangdaia/profile
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Projects
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Projects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../project-animal/" class="md-nav__link">
        Animal STAT-US Tracker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../project-wordsight/" class="md-nav__link">
        WORDSIGHT
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          What Makes You Happy?
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        What Makes You Happy?
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0-getting-started" class="md-nav__link">
    0. Getting Started
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-data-processing" class="md-nav__link">
    1. Data Processing
  </a>
  
    <nav class="md-nav" aria-label="1. Data Processing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-reading-data-from-file" class="md-nav__link">
    1.1 Reading Data from File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-fill-the-empty-column" class="md-nav__link">
    1.2 Fill the Empty Column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-extract-and-rename" class="md-nav__link">
    1.3 Extract and Rename
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-data-exploration-and-analysis" class="md-nav__link">
    2. Data Exploration and Analysis
  </a>
  
    <nav class="md-nav" aria-label="2. Data Exploration and Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-global-trend" class="md-nav__link">
    2.1 Global Trend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-happiness-score-vs-gdp" class="md-nav__link">
    2.2 Happiness Score vs. GDP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-happniess-score-vs-life-expectency" class="md-nav__link">
    2.3 Happniess Score vs. Life Expectency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-happiness-score-vs-social-support" class="md-nav__link">
    2.4 Happiness Score vs. Social Support
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-happiness-score-vs-freedom" class="md-nav__link">
    2.5 Happiness Score vs. Freedom
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-heatmap-per-region" class="md-nav__link">
    2.6 Heatmap per Region
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-model-prediction" class="md-nav__link">
    3. Model Prediction
  </a>
  
    <nav class="md-nav" aria-label="3. Model Prediction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-global-model" class="md-nav__link">
    3.1 Global Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-predict-per-region" class="md-nav__link">
    3.2 Predict per Region
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../project-tsp/" class="md-nav__link">
        Traveling Salesman Problem
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0-getting-started" class="md-nav__link">
    0. Getting Started
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-data-processing" class="md-nav__link">
    1. Data Processing
  </a>
  
    <nav class="md-nav" aria-label="1. Data Processing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-reading-data-from-file" class="md-nav__link">
    1.1 Reading Data from File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-fill-the-empty-column" class="md-nav__link">
    1.2 Fill the Empty Column
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-extract-and-rename" class="md-nav__link">
    1.3 Extract and Rename
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-data-exploration-and-analysis" class="md-nav__link">
    2. Data Exploration and Analysis
  </a>
  
    <nav class="md-nav" aria-label="2. Data Exploration and Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-global-trend" class="md-nav__link">
    2.1 Global Trend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-happiness-score-vs-gdp" class="md-nav__link">
    2.2 Happiness Score vs. GDP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-happniess-score-vs-life-expectency" class="md-nav__link">
    2.3 Happniess Score vs. Life Expectency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-happiness-score-vs-social-support" class="md-nav__link">
    2.4 Happiness Score vs. Social Support
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-happiness-score-vs-freedom" class="md-nav__link">
    2.5 Happiness Score vs. Freedom
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-heatmap-per-region" class="md-nav__link">
    2.6 Heatmap per Region
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-model-prediction" class="md-nav__link">
    3. Model Prediction
  </a>
  
    <nav class="md-nav" aria-label="3. Model Prediction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-global-model" class="md-nav__link">
    3.1 Global Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-predict-per-region" class="md-nav__link">
    3.2 Predict per Region
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="what-makes-you-happy">What Makes You Happy?</h1>
<p><strong>CMSC320: Intro to Data Science</strong> 
Final Tutorial Project</p>
<blockquote>
<p>Fall 2020, Dahye Kang</p>
</blockquote>
<hr />
<h2 id="introduction">Introduction</h2>
<p>Happiness is one of the most important parts of human life. We feel
happiness from pleasure or joy instantaneously and feel happiness from
life satisfaction. Long-term life satisfaction is one of the most
important factors in human life and influence how society is satisfied,
not only the individual. Since 2012, based on the survey, people
digitize the answer to measure happiness from life satisfaction.</p>
<p>Every year, the World Happiness Report releases global happiness data
for each country. The reports review the state of happiness in the world
today and show how the digitized data of happiness explains personal and
national variations in happiness. Due to the efficiency and reliability
of happiness measurements, the report is used in organizations and civil
society to inform their policy-making decisions.</p>
<p>The scores are based on answers to the main life evaluation question
asked in the poll from Gallup World Poll. The questions ask for answers
in a range of 0 to 10 that zero is the worst possible life, and ten is
the best possible life. In the data, the columns following the happiness
score estimate the extent to which each of six factors -- economy (GDP
per Capita), social support (family), healthy life expectancy, freedom,
absence of corruption, and generosity; these explain why some countries
rank higher than others.</p>
<p>In this instruction, we will focus on how each factor influences a high
or low score, which leads to a high or low rank of happiness, and see
the priority factor of happiness; Money, healthy, or freedom?</p>
<hr />
<h2 id="0-getting-started">0. Getting Started</h2>
<p>All the work is based on Python 3 (Python 3.9.0) with the following
packages:</p>
<ul>
<li><strong>pandas</strong>:<ul>
<li>a module that use to make a date frame, organize, and do other
    various work for data table; necessary for data handling.</li>
</ul>
</li>
<li><strong>numpy</strong>:<ul>
<li>a module to use for multi-dimension array. Required when dealing
    with linear algebra calculation.</li>
</ul>
</li>
<li><strong>matplotlib</strong>:<ul>
<li>a module to visualize the data; can make various graphs. We only
    use the pyplot from matplotlib package.</li>
</ul>
</li>
<li><strong>seaborn</strong>:<ul>
<li>data visualization library based on matplotlib, but more various
    and high-level plot can use to visualize the data</li>
</ul>
</li>
<li><strong>sklearn</strong>:<ul>
<li>a module for machine learning to use to learn and predict the
    model in various way; linear regression, classfication, etc.</li>
</ul>
</li>
</ul>
<p>If you are new to this, install the modules using <code>pip
install [module_name]</code> (this is one way to install a
module; there is various way to install).</p>
<p>Import the modules like this in the code:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">linear_model</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">cross_validate</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</span></code></pre></div>
<p>After calling all the necessary modules, we need to download the
dataset. Each year, the World Happiness Report release the dataset, but
as we cannot download all the file individually, we use <em>kaggle.com</em> to
download already collected data for 2015 to 2019 by other users.</p>
<p>Download dataset in this link:
<a href="https://www.kaggle.com/unsdsn/world-happiness">World_Happiness</a></p>
<hr />
<h2 id="1-data-processing">1. Data Processing</h2>
<h3 id="11-reading-data-from-file">1.1 Reading Data from File</h3>
<p>In this section, the goal is reading data from CSV files, reorganizing
the data as we want. First, as each year data is in separate csv file,
we need to read each csv file. Read the CSV files for each year by
<strong>pd.read_csv(filename)</strong> method, and DO NOT add all data up yet; each
file has differet columns and columns\' name. Also, the original CSV
files do not have a column indicating year, I add the year column to the
DataFrame using <strong>insert(location, column_name, column_value,
allow_duplicate = True)</strong>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">years</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">2016</span><span class="p">,</span> <span class="mi">2017</span><span class="p">,</span> <span class="mi">2018</span><span class="p">,</span> <span class="mi">2019</span><span class="p">]</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="c1"># read 2015.csv</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">data_2015</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;WorldHappiness/2015.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">data_2015</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="mi">2015</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1"># read 2016.csv</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="n">data_2016</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;WorldHappiness/2016.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">data_2016</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="mi">2016</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1"># read 2017.csv</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="n">data_2017</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;WorldHappiness/2017.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="n">data_2017</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="mi">2017</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="c1"># read 2018.csv</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="n">data_2018</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;WorldHappiness/2018.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="n">data_2018</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="mi">2018</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="c1"># read 2019.csv</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="n">data_2019</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;WorldHappiness/2019.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="n">data_2019</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="mi">2019</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span></code></pre></div>
<p>Before making data efficient, we need to check that each dataset\'s
columns are different or equivalent. Here is the shape of each year
dataset:</p>
<ul>
<li>2015 Data Shape: (158, 13)</li>
<li>2016 Data Shape: (157, 14)</li>
<li>2017 Data Shape: (155, 13)</li>
<li>2018 Data Shape: (156, 10)</li>
<li>2019 Data Shape: (156, 10)</li>
</ul>
<p>Each year data has some different columns, so to make all year data to
one, we only use the columns that exist in all data set. Below is the
table showing which year\'s data is missing or named differently:</p>
<table>
<thead>
<tr>
<th>2015</th>
<th>2016</th>
<th>2017</th>
<th>2018</th>
<th>2019</th>
</tr>
</thead>
<tbody>
<tr>
<td>Country</td>
<td>Country</td>
<td>Country</td>
<td>Country or region</td>
<td>Country or region</td>
</tr>
<tr>
<td>Region</td>
<td>Region</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>Happiness Rank</td>
<td>Happiness Rank</td>
<td>Happiness.Rank</td>
<td>Happiness Rank</td>
<td>Happiness Rank</td>
</tr>
<tr>
<td>Happiness Score</td>
<td>Happiness Score</td>
<td>Happiness Score</td>
<td>Happiness Score</td>
<td>Happiness Score</td>
</tr>
<tr>
<td>Standard Error</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>Lower Confidence Interval</td>
<td>Whisker.low</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-</td>
<td>Upper Confidence Interval</td>
<td>Whisker.low</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>Economy (GDP per Capita)</td>
<td>Economy (GDP per Capita)</td>
<td>Economy..GDP.per.Capita.</td>
<td>GDP per capita</td>
<td>GDP per capita</td>
</tr>
<tr>
<td>Family</td>
<td>Family</td>
<td>Family</td>
<td>Social support</td>
<td>Social support</td>
</tr>
<tr>
<td>Health (Life Expectancy)</td>
<td>Health (Life Expectancy)</td>
<td>Health..life.Expectancy.</td>
<td>Healthy lift expenctancy</td>
<td>Healthy life expectancy</td>
</tr>
<tr>
<td>Freedom</td>
<td>Freedom</td>
<td>Freedom</td>
<td>Freedom to make life chices</td>
<td>Freedom to make life chices</td>
</tr>
<tr>
<td>Trust (Government Corruption)</td>
<td>Trust (Government Corruption)</td>
<td>Trust..Government.Corruption.</td>
<td>Perceptions of Corruption</td>
<td>Perceptions of Corruption</td>
</tr>
<tr>
<td>Generosity</td>
<td>Generosity</td>
<td>Generosity</td>
<td>Generosity</td>
<td>Generosity</td>
</tr>
<tr>
<td>Dystopia Residual</td>
<td>Dystopia Residual</td>
<td>Dystopia.Residual</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>In summary, we will use the columns: country, region, rank, score, gdp,
family, lifeExp, freedom, trust, and generosity. There is no region data
in 2017, 2018, and 2019, but the region data is useful to analyze the
data by grouping it, we will merge the 2015 and 2016 region data to
2017, 2018, and 2019.</p>
<h3 id="12-fill-the-empty-column">1.2 Fill the Empty Column</h3>
<p>To get the region data from 2015 and 2016, sort the two datasets by
<em>Country</em> name, and extract only the <em>Country</em> and <em>Region</em> columns.
Then, the 2015 data and 2016 data have different length, so we need to
consider the case that the countries only exist in one of the dataset.
To prevent loss, we will merge the two region data as <strong>outer</strong> option
in <strong>pd.merge</strong> function.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">#Sort data by Country</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">sort_2016</span> <span class="o">=</span> <span class="n">data_2016</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;Country&quot;</span><span class="p">)</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">sort_2015</span> <span class="o">=</span> <span class="n">data_2015</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;Country&quot;</span><span class="p">)</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1">#Get the Country and Region columns only</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="n">region_2016</span> <span class="o">=</span> <span class="n">sort_2016</span><span class="p">[[</span><span class="s2">&quot;Country&quot;</span><span class="p">,</span> <span class="s2">&quot;Region&quot;</span><span class="p">]]</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="n">region_2015</span> <span class="o">=</span> <span class="n">sort_2015</span><span class="p">[[</span><span class="s2">&quot;Country&quot;</span><span class="p">,</span> <span class="s2">&quot;Region&quot;</span><span class="p">]]</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="c1">#Merge two</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="n">region</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">region_2015</span><span class="p">,</span><span class="n">region_2016</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;outer&quot;</span><span class="p">)</span>
</span></code></pre></div>
<ul>
<li>region and country shape: (164, 2)</li>
</ul>
<p>Now, the region has more region data than data from 2015 and 2016. After
making the region dataset, we will apply this region data to different
year datasets. The 2018 and 2019 dataset have different column name for
<em>Country</em> as <em>Country or region</em> (check the above column list table),
specifing the merge option that the column in left dataset to merge is
\"Country or region\" and the column in right dataset to merge is
\"Country\". The merge between the 2017, 2018, and 2019 data and region
data is inner merge (default); it will not include the row which cannot
find corresponding country and region in region data.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">data_new_2017</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">data_2017</span><span class="p">,</span> <span class="n">region</span><span class="p">)</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">data_new_2018</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">data_2018</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s2">&quot;Country or region&quot;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s2">&quot;Country&quot;</span><span class="p">)</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">data_new_2019</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">data_2019</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s2">&quot;Country or region&quot;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s2">&quot;Country&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>The outcome dataset shows the shape as:</p>
<ul>
<li>2015 New Data Shape: (158, 13)</li>
<li>2016 New Data Shape: (157, 14)</li>
<li>2017 New Data Shape: (153, 14)</li>
<li>2018 New Data Shape: (154, 12)</li>
<li>2019 New Data Shape: (152, 12)</li>
</ul>
<h3 id="13-extract-and-rename">1.3 Extract and Rename</h3>
<p>As above I said, we only need the data that are all common in every year
data.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1">#columns list to want to use</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">,</span><span class="s2">&quot;country&quot;</span><span class="p">,</span><span class="s2">&quot;region&quot;</span><span class="p">,</span><span class="s2">&quot;rank&quot;</span><span class="p">,</span><span class="s2">&quot;score&quot;</span><span class="p">,</span><span class="s2">&quot;gdp&quot;</span><span class="p">,</span><span class="s2">&quot;family&quot;</span><span class="p">,</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span><span class="s2">&quot;freedom&quot;</span><span class="p">,</span><span class="s2">&quot;trust&quot;</span><span class="p">,</span><span class="s2">&quot;generosity&quot;</span><span class="p">]</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="c1">#loop each year dataset and append the necessary data to list</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data_2015</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>    <span class="n">app</span> <span class="o">=</span> <span class="n">row</span><span class="p">[[</span><span class="s2">&quot;year&quot;</span><span class="p">,</span><span class="s2">&quot;Country&quot;</span><span class="p">,</span><span class="s2">&quot;Region&quot;</span><span class="p">,</span><span class="s2">&quot;Happiness Rank&quot;</span><span class="p">,</span><span class="s2">&quot;Happiness Score&quot;</span><span class="p">,</span><span class="s2">&quot;Economy (GDP per Capita)&quot;</span><span class="p">,</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>                <span class="s2">&quot;Family&quot;</span><span class="p">,</span><span class="s2">&quot;Health (Life Expectancy)&quot;</span><span class="p">,</span><span class="s2">&quot;Freedom&quot;</span><span class="p">,</span><span class="s2">&quot;Trust (Government Corruption)&quot;</span><span class="p">,</span><span class="s2">&quot;Generosity&quot;</span><span class="p">]]</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data_2016</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[[</span><span class="s2">&quot;year&quot;</span><span class="p">,</span><span class="s2">&quot;Country&quot;</span><span class="p">,</span><span class="s2">&quot;Region&quot;</span><span class="p">,</span><span class="s2">&quot;Happiness Rank&quot;</span><span class="p">,</span><span class="s2">&quot;Happiness Score&quot;</span><span class="p">,</span><span class="s2">&quot;Economy (GDP per Capita)&quot;</span><span class="p">,</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>                     <span class="s2">&quot;Family&quot;</span><span class="p">,</span><span class="s2">&quot;Health (Life Expectancy)&quot;</span><span class="p">,</span><span class="s2">&quot;Freedom&quot;</span><span class="p">,</span><span class="s2">&quot;Trust (Government Corruption)&quot;</span><span class="p">,</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>                     <span class="s2">&quot;Generosity&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data_new_2017</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[[</span><span class="s2">&quot;year&quot;</span><span class="p">,</span><span class="s2">&quot;Country&quot;</span><span class="p">,</span><span class="s2">&quot;Region&quot;</span><span class="p">,</span><span class="s2">&quot;Happiness.Rank&quot;</span><span class="p">,</span><span class="s2">&quot;Happiness.Score&quot;</span><span class="p">,</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>                    <span class="s2">&quot;Economy..GDP.per.Capita.&quot;</span><span class="p">,</span><span class="s2">&quot;Family&quot;</span><span class="p">,</span> <span class="s2">&quot;Health..Life.Expectancy.&quot;</span><span class="p">,</span><span class="s2">&quot;Freedom&quot;</span><span class="p">,</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>                    <span class="s2">&quot;Trust..Government.Corruption.&quot;</span><span class="p">,</span><span class="s2">&quot;Generosity&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data_new_2018</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[[</span><span class="s2">&quot;year&quot;</span><span class="p">,</span><span class="s2">&quot;Country or region&quot;</span><span class="p">,</span><span class="s2">&quot;Region&quot;</span><span class="p">,</span><span class="s2">&quot;Overall rank&quot;</span><span class="p">,</span><span class="s2">&quot;Score&quot;</span><span class="p">,</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>                    <span class="s2">&quot;GDP per capita&quot;</span><span class="p">,</span> <span class="s2">&quot;Social support&quot;</span><span class="p">,</span> <span class="s2">&quot;Healthy life expectancy&quot;</span><span class="p">,</span> 
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>                    <span class="s2">&quot;Freedom to make life choices&quot;</span><span class="p">,</span> <span class="s2">&quot;Perceptions of corruption&quot;</span><span class="p">,</span> <span class="s2">&quot;Generosity&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data_new_2019</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[[</span><span class="s2">&quot;year&quot;</span><span class="p">,</span><span class="s2">&quot;Country or region&quot;</span><span class="p">,</span><span class="s2">&quot;Region&quot;</span><span class="p">,</span><span class="s2">&quot;Overall rank&quot;</span><span class="p">,</span><span class="s2">&quot;Score&quot;</span><span class="p">,</span><span class="s2">&quot;GDP per capita&quot;</span><span class="p">,</span> 
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>                    <span class="s2">&quot;Social support&quot;</span><span class="p">,</span> <span class="s2">&quot;Healthy life expectancy&quot;</span><span class="p">,</span> <span class="s2">&quot;Freedom to make life choices&quot;</span><span class="p">,</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>                    <span class="s2">&quot;Perceptions of corruption&quot;</span><span class="p">,</span> <span class="s2">&quot;Generosity&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="n">data</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>year</th>
<th>country</th>
<th>region</th>
<th>rank</th>
<th>score</th>
<th>gdp</th>
<th>family</th>
<th>lifeExp</th>
<th>freedom</th>
<th>trust</th>
<th>generosity</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>2015</td>
<td>Switzerland</td>
<td>Western Europe</td>
<td>1</td>
<td>7.587</td>
<td>1.39651</td>
<td>1.34951</td>
<td>0.94143</td>
<td>0.66557</td>
<td>0.41978</td>
</tr>
<tr>
<td>1</td>
<td>2015</td>
<td>Iceland</td>
<td>Western Europe</td>
<td>2</td>
<td>7.561</td>
<td>1.30232</td>
<td>1.40223</td>
<td>0.94784</td>
<td>0.62877</td>
<td>0.14145</td>
</tr>
<tr>
<td>2</td>
<td>2015</td>
<td>Denmark</td>
<td>Western Europe</td>
<td>3</td>
<td>7.527</td>
<td>1.32548</td>
<td>1.36058</td>
<td>0.87464</td>
<td>0.64938</td>
<td>0.48357</td>
</tr>
<tr>
<td>3</td>
<td>2015</td>
<td>Norway</td>
<td>Western Europe</td>
<td>4</td>
<td>7.522</td>
<td>1.45900</td>
<td>1.33095</td>
<td>0.88521</td>
<td>0.66973</td>
<td>0.36503</td>
</tr>
<tr>
<td>4</td>
<td>2015</td>
<td>Canada</td>
<td>North America</td>
<td>5</td>
<td>7.427</td>
<td>1.32629</td>
<td>1.32261</td>
<td>0.90563</td>
<td>0.63297</td>
<td>0.32957</td>
</tr>
</tbody>
</table>
<p>Now, let's see how the data is related.</p>
<hr />
<h2 id="2-data-exploration-and-analysis">2. Data Exploration and Analysis</h2>
<p>The goal of this section is analyzing data as finding the relation of
six factors and happiness score. To see the global trend of relation
with factors and score, we plot the heatmap.</p>
<h3 id="21-global-trend">2.1 Global Trend</h3>
<p>To the dataset what we want to see the correlation, use the <strong>corr()</strong>
and return a correlation matrix. Using the seaborn, plot the heatmap
given the values as the correlation matrix.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">#Corrleation Matrix</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">corrMatrix</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;score&quot;</span><span class="p">,</span><span class="s2">&quot;gdp&quot;</span><span class="p">,</span><span class="s2">&quot;family&quot;</span><span class="p">,</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span><span class="s2">&quot;freedom&quot;</span><span class="p">,</span><span class="s2">&quot;trust&quot;</span><span class="p">,</span><span class="s2">&quot;generosity&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="c1">#plot heatmap</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corrMatrix</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">square</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Correlation of Happiness Score with Other factors&quot;</span><span class="p">,</span> <span class="n">fontweight</span> <span class="o">=</span> <span class="s2">&quot;bold&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p><img alt="" src="../../assets/images/e3b343ed543330ffabe0e7c415cf81c5648fb786.png" /></p>
<p>The heatmap shows the correlations with the level of strongness through
the color difference. The color bar on right side indicate which color
is closed to 1 or 0. According to the heatmap, the score shows the
correlation coefficient as 0.79 for gdp, 0.65 for family, 0.74 for
lifeExp, 0.55 for freedom, 0.4 for trust, 0.14 for generoisty. The order
of strong coefficient is GDP > Family > Life Expectency > Freedom >
perceptions of corruption > Generoisty.</p>
<p>In the Statistics, above 0.8 correlation coefficient is strong, above
0.5 and below 0.8 correlation coefficient is consider moderate, and
below 0.5 correlation coefficient is weak. Then, the gdp, family,
lifeExp, and freedom is considered moderate coefficient with no strong
coefficient. Leave the weak correlation coefficient, we will see that
how the four variable is related to score with region indication.</p>
<h3 id="22-happiness-score-vs-gdp">2.2 Happiness Score vs. GDP</h3>
<p>We will plot the multi linear regression line with scatter plot using
the <strong>lmplot</strong> in seaborn. The first plot we will look at is happiness
score vs. GDP. Set x value as <em>gdp</em> and y value is <em>score</em> with hue as
<em>region</em> (show regions in different colors). Set col is <em>year</em> and
col_wrap to 3 which are showing graph for each year data with three
columns. Then we can plot the 5 subplots of scatter plot with linear
regression line for each region.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;score&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;gdp&quot;</span><span class="p">,</span> <span class="n">hue</span> <span class="o">=</span> <span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">col_wrap</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">6</span><span class="p">)</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Happiness Score vs. GDP per Time&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">35</span><span class="p">,</span> <span class="n">fontweight</span> <span class="o">=</span> <span class="s2">&quot;bold&quot;</span><span class="p">)</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="n">col_template</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{col_name}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="n">g</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s2">&quot;GDP per Capita&quot;</span><span class="p">,</span> <span class="s2">&quot;Happiness Score&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">18</span><span class="p">)</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">hspace</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="mf">0.90</span><span class="p">,</span> <span class="n">left</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="n">g</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p><img alt="" src="../../assets/images/76012a58190d91985598b18dd8445309d6d35a7b.png" /></p>
<p>The plot shows that the tendency of higher GDP with higher happiness
score in every year. If we see the each region\'s regression line, some
regions do not follow the global tendency. The North America and
Australia and New Zealand show that their score does not get high by
high GDP. The Western Europ shows the steep slope among other regions
which means high gdp countries have high score of happiness. Compared to
it, the Sub-Saharan Africa and Southern Asia show the GDP does not
influence much to the high score.</p>
<h3 id="23-happniess-score-vs-life-expectency">2.3 Happniess Score vs. Life Expectency</h3>
<p>Do the same way with the modification of x variable to <em>lifeExp</em></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;score&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;Set1&quot;</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">col_wrap</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Happiness Score vs. Life Expectancy per Time&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">35</span><span class="p">,</span> <span class="n">fontweight</span> <span class="o">=</span> <span class="s2">&quot;bold&quot;</span><span class="p">)</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="n">col_template</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{col_name}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="n">g</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s2">&quot;Health (Life Expectancy)&quot;</span><span class="p">,</span> <span class="s2">&quot;Happiness Score&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">18</span><span class="p">)</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">hspace</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="mf">0.90</span><span class="p">,</span> <span class="n">left</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="n">g</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p><img alt="" src="../../assets/images/c24578b69438dae2773a15735897b2539a3d84e8.png" /></p>
<p>The overall trend is that with higher lifeExp, the higher happiness
score is which is smaller than GDP slope. The Sub-Saharan Africa,
Central and Eastern Europe, and Western Europe show that same or similar
score with various lifeExp value meaning lifeExp does not influence much
on happiness. However, Middle East and Northern Africa and Latin America
and Caribbean show that high lifeExp reflect to score as high.</p>
<h3 id="24-happiness-score-vs-social-support">2.4 Happiness Score vs. Social Support</h3>
<p>Do same as above plots with the modification of x variable.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span><span class="s2">&quot;score&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;family&quot;</span><span class="p">,</span> <span class="n">hue</span> <span class="o">=</span> <span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;CMRmap&quot;</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">col_wrap</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Happiness Score vs. Social Support per Time&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">35</span><span class="p">,</span> <span class="n">fontweight</span> <span class="o">=</span> <span class="s2">&quot;bold&quot;</span><span class="p">)</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="n">col_template</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{col_name}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="n">g</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s2">&quot;Social Support&quot;</span><span class="p">,</span> <span class="s2">&quot;Happiness Score&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">18</span><span class="p">)</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">hspace</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="mf">0.90</span><span class="p">,</span> <span class="n">left</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="n">g</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p><img alt="" src="../../assets/images/3c2c7ed88102a1f41eca49e02139f534a9aaa843.png" /></p>
<p>This is also shows the high social support with high score but not much
as the lifeExp graph. Most of country does not reflect the high
happiness score with high social support, but the Western Europe reflect
it.</p>
<h3 id="25-happiness-score-vs-freedom">2.5 Happiness Score vs. Freedom</h3>
<p>Do same as above plots with modification of x variable</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;score&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;freedom&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;twilight&quot;</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">col_wrap</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Happiness Score vs. Freedom per Time&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">35</span><span class="p">,</span> <span class="n">fontweight</span> <span class="o">=</span> <span class="s2">&quot;bold&quot;</span><span class="p">)</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="n">col_template</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{col_name}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="n">g</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s2">&quot;Freedom&quot;</span><span class="p">,</span> <span class="s2">&quot;Happiness Score&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">18</span><span class="p">)</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">hspace</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="mf">0.90</span><span class="p">,</span> <span class="n">left</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="n">g</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p><img alt="" src="../../assets/images/234d7db98b8bf260e5dbeef425c7d258a8ab8bbe.png" /></p>
<p>This shows the weak relations between happiness score and freedom that
most of country shows similar happiness score whatever the freedom gets.</p>
<h3 id="26-heatmap-per-region">2.6 Heatmap per Region</h3>
<p>The above plots show that the factors influenced to the happiness score
are different for each region. To see the correlation of factors and
score for each region, we will plot the 10 subplots of heatmaps.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1">#region list - 10 regions</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">region</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c1">#subplots of 2x5 matrixs</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">constrained_layout</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">sharex</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="c1">#show only one color bar in given location</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="n">cbar_ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">.9</span><span class="p">,</span> <span class="mf">.3</span><span class="p">,</span> <span class="mf">.02</span><span class="p">,</span> <span class="mf">.4</span><span class="p">])</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="c1">#loop over the region list</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">loc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">region</span><span class="p">):</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>    <span class="k">if</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span><span class="o">%</span><span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>        <span class="n">j</span><span class="o">+=</span><span class="mi">1</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>    <span class="c1">#correlation matrix for corresponding region</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>    <span class="n">corrMatrix</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span><span class="o">==</span><span class="n">loc</span><span class="p">][[</span><span class="s2">&quot;score&quot;</span><span class="p">,</span><span class="s2">&quot;gdp&quot;</span><span class="p">,</span><span class="s2">&quot;family&quot;</span><span class="p">,</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span><span class="s2">&quot;freedom&quot;</span><span class="p">,</span><span class="s2">&quot;trust&quot;</span><span class="p">,</span><span class="s2">&quot;generosity&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>    <span class="c1">#heatmap for correlation matrix</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>    <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corrMatrix</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="o">%</span><span class="mi">5</span><span class="p">],</span><span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cbar_ax</span><span class="o">=</span><span class="kc">None</span> <span class="k">if</span> <span class="n">i</span> <span class="k">else</span> <span class="n">cbar_ax</span><span class="p">)</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>    <span class="n">ax</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="o">%</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">loc</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="n">fontweight</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">.98</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Correlation of Happiness with Other Factors for Each Region&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span> <span class="n">fontweight</span> <span class="o">=</span> <span class="s2">&quot;bold&quot;</span><span class="p">)</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p><img alt="" src="../../assets/images/c18fca4c632abf421fc704099695c045064741b0.png" /></p>
<p>The chart listed the top three factors which is high correlation for
each region (indicate strong coefficient as
<code>&lt;span style="color:#EF9342"&gt;</code>color<code>&lt;/span&gt;</code>, moderate
coefficient as
<code>&lt;span style="color:#C70039"&gt;</code>color<code>&lt;/span&gt;</code>):</p>
<table>
<thead>
<tr>
<th>Region</th>
<th>First</th>
<th>Second</th>
<th>Third</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><em>Global</em></strong></td>
<td><span style="color:#C70039">GDP</span></td>
<td><span style="color:#C70039">lifeExp</span></td>
<td><span style="color:#C70039">Social Support</span></td>
</tr>
<tr>
<td><strong><em>Western Europe</em></strong></td>
<td><span style="color:#EF9342">trust</span></td>
<td><span style="color:#C70039">freedom</span></td>
<td><span style="color:#C70039">GDP</span></td>
</tr>
<tr>
<td><strong><em>North America</em></strong></td>
<td><span style="color:#EF9342">trust</span></td>
<td><span style="color:#EF9342">freedom</span></td>
<td><span style="color:#C70039">generosity</span></td>
</tr>
<tr>
<td><strong><em>Austraila and New Zealand</em></strong></td>
<td><span style="color:#C70039">trust</span></td>
<td>generosity</td>
<td>freedom</td>
</tr>
<tr>
<td><strong><em>Middle East and Northern Africa</em></strong></td>
<td><span style="color:#EF9342">GDP</span></td>
<td><span style="color:#C70039">freedom</span></td>
<td><span style="color:#C70039">lifeExp</span></td>
</tr>
<tr>
<td><strong><em>Latin America and Caribbean</em></strong></td>
<td><span style="color:#C70039">GDP</span></td>
<td><span style="color:#C70039">freedom</span></td>
<td><span style="color:#C70039">lifeExp</span></td>
</tr>
<tr>
<td><strong><em>Southeastern Asia</em></strong></td>
<td><span style="color:#EF9342">GDP</span></td>
<td><span style="color:#C70039">lifeExp</span></td>
<td><span style="color:#C70039">social support</span></td>
</tr>
<tr>
<td><strong><em>Central and Eastern Europe</em></strong></td>
<td><span style="color:#C70039">family</span> freedom</td>
<td>GDP</td>
<td></td>
</tr>
<tr>
<td><strong><em>Eastern Asia</em></strong></td>
<td><span style="color:#C70039">GDP</span></td>
<td><span style="color:#C70039">lifeExp</span></td>
<td>trust</td>
</tr>
<tr>
<td><strong><em>Sub-Saharan Africa</em></strong></td>
<td>family</td>
<td>GDP</td>
<td>freedom</td>
</tr>
<tr>
<td><strong><em>Southern Asia</em></strong></td>
<td><span style="color:#C70039">trust</span></td>
<td>family</td>
<td>lifeExp</td>
</tr>
</tbody>
</table>
<p>Unlike the Global's strongest coefficient is GDP, the regions follow it
is only 4 out of 10. Assume that the country has enough economy growth
(high GDP), consider the perceptions of corruption and freedom to the
important factors for happiness; perceiving social values are important.
Also, for the country considered the GDP as first, they are also care
about the healthy life expectancy. So, I can assume that importance of
ecomonic growth comes with factor of healty life expectancy for the
happiness.</p>
<hr />
<h2 id="3-model-prediction">3. Model Prediction</h2>
<p>Based on above interpretation, We will find the model for global and
plot the residual scatter plot. Also, we will find the model per each
region, and see how well they predict compared to using global model.
All the finding is only based on top three facters for every model.</p>
<h3 id="31-global-model">3.1 Global Model</h3>
<p>We will use the <em>LinearRegression</em> method under <em>sklearn.linear_model</em>
for multi linear regression. For the global model, the x variable is
gdp, lifeExp, and family and y variable is score. Apply x and y to
<strong>linEq.fit(x,y)</strong> and get the slope and intercept.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">linEq</span> <span class="o">=</span> <span class="n">linear_model</span><span class="o">.</span><span class="n">LinearRegression</span><span class="p">()</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;gdp&quot;</span><span class="p">,</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span><span class="s2">&quot;family&quot;</span><span class="p">]]</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="n">linEq</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="n">slope</span> <span class="o">=</span> <span class="n">linEq</span><span class="o">.</span><span class="n">coef_</span> <span class="c1">#slope coefficient list</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="n">intercept</span> <span class="o">=</span> <span class="n">linEq</span><span class="o">.</span><span class="n">intercept_</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Equation: score = </span><span class="si">{</span><span class="n">intercept</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> + </span><span class="si">{</span><span class="n">slope</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">*(gdp) + </span><span class="si">{</span><span class="n">slope</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">*(lifeExp) + </span><span class="si">{</span><span class="n">slope</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">*(family)&quot;</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code>Equation: score = 2.6423 + 1.2529*(gdp) + 1.1586*(lifeExp) + 0.8188*(family)
</code></pre></div>
<p>Now we get the expected y value based on original x using
<strong>linEq.predict(x)</strong>, and calculate residual by subracting original y to
expected y value. Then, add region column and original y column; it will
be used for plotting per each region.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">predict_y</span> <span class="o">=</span> <span class="n">linEq</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="n">residual</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">predict_y</span><span class="p">)</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="n">residual</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">residual</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;difference&quot;</span><span class="p">])</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="n">residual</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="n">residual</span><span class="p">[</span><span class="s2">&quot;original&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="n">residual</span><span class="p">[</span><span class="s2">&quot;expect&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">predict_y</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="n">residual</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>difference</th>
<th>region</th>
<th>original</th>
<th>expect</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0.999329</td>
<td>Western Europe</td>
<td>7.587</td>
</tr>
<tr>
<td>1</td>
<td>1.040749</td>
<td>Western Europe</td>
<td>7.561</td>
</tr>
<tr>
<td>2</td>
<td>1.096641</td>
<td>Western Europe</td>
<td>7.527</td>
</tr>
<tr>
<td>3</td>
<td>0.936365</td>
<td>Western Europe</td>
<td>7.522</td>
</tr>
<tr>
<td>4</td>
<td>0.990811</td>
<td>North America</td>
<td>7.427</td>
</tr>
</tbody>
</table>
<p>Let's see how global model works in each region.</p>
<p>We will plot 10 subplots of residual plots using scatterplot.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1">#region list</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="n">region</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">constrained_layout</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">sharex</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">loc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">region</span><span class="p">):</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    <span class="k">if</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span><span class="o">%</span><span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">#update row</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>        <span class="n">j</span><span class="o">+=</span><span class="mi">1</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="c1">#scatter plot</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>    <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;expect&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;difference&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;ch:r=-.2,d=.3_r&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="o">%</span><span class="mi">5</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">residual</span><span class="p">[</span><span class="n">residual</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span><span class="o">==</span><span class="n">loc</span><span class="p">])</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>    <span class="n">ax</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="o">%</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">loc</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">18</span><span class="p">,</span> <span class="n">fontweight</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p><img alt="" src="../../assets/images/3eacd8f4a1c3b1d3bfcbafede56f1be3fe4b945e.png" /></p>
<p>Only the Southeastern Asia show acceptable residual plot, and rest of
plot show the pattern which mean the model is not working well.</p>
<p>To see the accurate score of model prediction, use the
<strong>cross_validate(regression_method, x, y)</strong>, and get the test score of
it with default 5-fold CV.</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">result</span> <span class="o">=</span> <span class="n">cross_validate</span><span class="p">(</span><span class="n">linEq</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="n">global_square</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;test_score&quot;</span><span class="p">])</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;R-Squared Score for global model in Avg: &quot;</span><span class="p">,</span><span class="n">global_square</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</span></code></pre></div>
R-Squared Score for global model in Avg:  0.4221315680210174</p>
<h3 id="32-predict-per-region">3.2 Predict per Region</h3>
<p>Now we will find the model for each region based on top three factors
for each. Use a dict to save the top three factor for each region, and
find the model like above.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># make a table for top three factors each</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">top_three</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;region&quot;</span><span class="p">:</span><span class="n">region</span><span class="p">,</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>            <span class="s2">&quot;first&quot;</span><span class="p">:</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>            <span class="p">[</span><span class="s2">&quot;trust&quot;</span><span class="p">,</span><span class="s2">&quot;trust&quot;</span><span class="p">,</span><span class="s2">&quot;trust&quot;</span><span class="p">,</span><span class="s2">&quot;gdp&quot;</span><span class="p">,</span><span class="s2">&quot;gdp&quot;</span><span class="p">,</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>            <span class="s2">&quot;gdp&quot;</span><span class="p">,</span><span class="s2">&quot;family&quot;</span><span class="p">,</span><span class="s2">&quot;gdp&quot;</span><span class="p">,</span><span class="s2">&quot;family&quot;</span><span class="p">,</span><span class="s2">&quot;trust&quot;</span><span class="p">],</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>            <span class="s2">&quot;second&quot;</span><span class="p">:</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>            <span class="p">[</span><span class="s2">&quot;freedom&quot;</span><span class="p">,</span><span class="s2">&quot;freedom&quot;</span><span class="p">,</span><span class="s2">&quot;generosity&quot;</span><span class="p">,</span><span class="s2">&quot;freedom&quot;</span><span class="p">,</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>            <span class="s2">&quot;freedom&quot;</span><span class="p">,</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span><span class="s2">&quot;freedom&quot;</span><span class="p">,</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span><span class="s2">&quot;gdp&quot;</span><span class="p">,</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>            <span class="s2">&quot;family&quot;</span><span class="p">],</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>            <span class="s2">&quot;third&quot;</span><span class="p">:</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>            <span class="p">[</span><span class="s2">&quot;gdp&quot;</span><span class="p">,</span><span class="s2">&quot;generosity&quot;</span><span class="p">,</span><span class="s2">&quot;freedom&quot;</span><span class="p">,</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>            <span class="s2">&quot;family&quot;</span><span class="p">,</span><span class="s2">&quot;gdp&quot;</span><span class="p">,</span><span class="s2">&quot;trust&quot;</span><span class="p">,</span><span class="s2">&quot;freedom&quot;</span><span class="p">,</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">]}</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="n">top_three</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">top_three</span><span class="p">)</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="n">top_three</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>region</th>
<th>first</th>
<th>second</th>
<th>third</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Western Europe</td>
<td>trust</td>
<td>freedom</td>
</tr>
<tr>
<td>1</td>
<td>North America</td>
<td>trust</td>
<td>freedom</td>
</tr>
<tr>
<td>2</td>
<td>Australia and New Zealand</td>
<td>trust</td>
<td>generosity</td>
</tr>
<tr>
<td>3</td>
<td>Middle East and Northern Africa</td>
<td>gdp</td>
<td>freedom</td>
</tr>
<tr>
<td>4</td>
<td>Latin America and Caribbean</td>
<td>gdp</td>
<td>freedom</td>
</tr>
</tbody>
</table>
<p>For each region, it get the top three factors list, do the multi linear
regression, predict y value based on original x, get the score of
prediction, and plot a scatter plot for residual vs. predicted value.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">constrained_layout</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">sharex</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="n">score</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">loc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">region</span><span class="p">):</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>    <span class="k">if</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span><span class="o">%</span><span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">#update row</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>        <span class="n">j</span><span class="o">+=</span><span class="mi">1</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>    <span class="c1">#get three factors for certain region</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>    <span class="n">factors</span> <span class="o">=</span> <span class="n">top_three</span><span class="p">[</span><span class="n">top_three</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span><span class="o">==</span><span class="n">loc</span><span class="p">][[</span><span class="s2">&quot;first&quot;</span><span class="p">,</span><span class="s2">&quot;second&quot;</span><span class="p">,</span><span class="s2">&quot;third&quot;</span><span class="p">]]</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>    <span class="c1">#multi linear regression</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>    <span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span><span class="o">==</span><span class="n">loc</span><span class="p">][</span><span class="n">factors</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span><span class="o">.</span><span class="n">flatten</span><span class="p">()]</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>    <span class="n">y_loc</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]</span><span class="o">==</span><span class="n">loc</span><span class="p">][</span><span class="s2">&quot;score&quot;</span><span class="p">]</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>    <span class="n">linEq</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y_loc</span><span class="p">)</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>    <span class="c1">#predict</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>    <span class="n">predict_y</span> <span class="o">=</span> <span class="n">linEq</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>    <span class="n">residual</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">y_loc</span><span class="p">,</span> <span class="n">predict_y</span><span class="p">)</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>    <span class="n">residual</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">residual</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;difference&quot;</span><span class="p">])</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>    <span class="n">residual</span><span class="p">[</span><span class="s2">&quot;original&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_loc</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>    <span class="n">residual</span><span class="p">[</span><span class="s2">&quot;expect&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">predict_y</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>    <span class="c1">#get the score of prediction</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>    <span class="n">score</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">linEq</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y_loc</span><span class="p">))</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>    <span class="c1">#scatter plot for residual vs. predicted value</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>    <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;expect&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;difference&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="o">%</span><span class="mi">5</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">residual</span><span class="p">)</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>    <span class="n">ax</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="o">%</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">loc</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">18</span><span class="p">,</span> <span class="n">fontweight</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></div>
<p><img alt="" src="../../assets/images/a569fd594236ea14db917fd2e83f89e7532bd226.png" /></p>
<p>This graph shows much scattered points in each plot, which means the
model is working better than just using global model. Still, the Central
and Eastern Europe and Sub-Saharan Africa tend to clustered together
vertically, it is not the best fit model to them.</p>
<p>Unlike the global model, we do not use cross-validate due to small
number of data for each region. Below is the R-Square score for each
region:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">loc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">region</span><span class="p">):</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;R-Squared Score for </span><span class="si">{</span><span class="n">loc</span><span class="si">:</span><span class="s2">31</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">score</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code>R-Squared Score for Western Europe                  0.7637
R-Squared Score for North America                   0.9650
R-Squared Score for Australia and New Zealand       0.4905
R-Squared Score for Middle East and Northern Africa 0.7752
R-Squared Score for Latin America and Caribbean     0.6679
R-Squared Score for Southeastern Asia               0.7681
R-Squared Score for Central and Eastern Europe      0.4753
R-Squared Score for Eastern Asia                    0.7523
R-Squared Score for Sub-Saharan Africa              0.2967
R-Squared Score for Southern Asia                   0.4608s
</code></pre></div>
<p>It shows that the model fit well for North America, and the Wstern
Europe, Middle East and Northern Africa, Southeastern Asia, and Eastern
Asia show the model is acceptable. It does not work well for Sub-saharan
Africa.</p>
<hr />
<h2 id="conclusion">Conclusion</h2>
<p>The main goal of instruction is finding out which factors is most
reflected in the happiness score. We used the top three factors to see
how the model fit, and get various score of prediction for each region.
Then, let\'s think about why some region get high score and others not.</p>
<p>In the data analysis step, through the heatmaps per region, we check
that which factors are strong correlation coefficient or not. The North
America shows first and second factors are strong coefficient, and thrid
factor is moderate. This means all three factors highly related to
happiness score. So, the prediction using these factors shows 0.965
R-Squared score. Contrast to it, the Sub-Saharan Africa\'s top three
factors are all weak correlation coefficient. Leading to it, the score
is also the lowest, meaning that the factors does not related to
happiness score much. These brings the idea that the higher correlation
coefficient is, the higher score get from the prediction based on the
variable.</p>
<p>If we consider this condition, the Western Europe get the highest
influence to the happiness score from perception of corruption, the
North America get the highest influence from perception of corruption
and freedom, the Middle East and Northern Africa get the highest
influence from economy (GDP per Capita), and also the Southeastern Asia
get the highest influence from economy (GDP per Capita). The rest of
region has the coefficient of moderate or weak, so it will not reflected
well in the happiness score.</p>
<p>Through the insctruction, we explore the data processing, data
analyzing, and model prediction based on data. Hope this is useful
information, and Thank you for sharing time to read.</p>
<p>Thank you.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "navigation.tabs", "content.code.copy"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="../../javascripts/extra.js"></script>
        
      
    
  </body>
</html>